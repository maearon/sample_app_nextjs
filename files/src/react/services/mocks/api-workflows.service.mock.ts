import {rest} from 'msw';
import {environment} from 'src/environments/environment';
import {
  createDetailHandler,
  createMockData,
  createPaginationHandler,
} from 'src/react/lib/mock-helper';

const MOCK_APPROVAL_REQUESTS = createMockData(
  [
    {
      id: '602a4f7edf7a30001896c79b',
      attachments: [],
      history: [],
      logs: [],
      feature: 'card_create',
      amount: 50,
      rawRequest: {},
      status: 'pending',
      createdBy: 'Malcolm Kee',
      totalRecords: 50,
      createdByEmail: 'malcolm@setel.my',
      createdAt: '2020-07-28T04:23:27.345Z',
      updatedAt: '2020-11-24T03:43:26.736Z',
    },
    {
      id: '602a4f7edf7a30001896c79b',
      attachments: [],
      history: [],
      logs: [],
      feature: 'merchantTopUp_create',
      amount: 500,
      rawRequest: {},
      status: 'pending',
      createdBy: 'Trung',
      totalRecords: 50,
      createdByEmail: 'malcolm@setel.my',
      createdAt: '2020-07-28T04:23:27.345Z',
      updatedAt: '2020-11-24T03:43:26.736Z',
    },
  ],
  10,
);

const MOCK_APPROVAL_RULES = createMockData(
  [
    {
      feature: 'payment_create',
      levels: [{approvers: ['6041df526959ef00170daf0d'], level: '1'}],
      status: 'active',
      createdBy: 'd3ee34b4-3df1-47cd-8703-57fa5b097175',
      updatedBy: 'd3ee34b4-3df1-47cd-8703-57fa5b097175',
      createdAt: '2021-03-18T03:42:11.397Z',
      updatedAt: '2021-03-18T03:42:11.397Z',
      id: '6052cc13432bea0017c21993',
    },
    {
      feature: 'card_create',
      levels: [
        {
          approvers: [
            '60486cf2873a6b001711c0f5',
            '60486d53873a6b001711c0f9',
            '60486d4a873a6b001711c0f8',
            '60486d37873a6b001711c0f6',
            '60486d40873a6b001711c0f7',
            '602e357e255c050018773011',
            '60223575271eec0018d25e94',
            '5fad133f8240360010ac5547',
            '6075508679d1dd00102f0abb',
          ],
          level: '1',
        },
        {approvers: [], level: '2'},
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: '099d43b9-bc9d-4868-874d-f6c0a464e209',
      updatedBy: '5998c6ad-ddf0-4c91-ab5c-f577c6e891a4',
      createdAt: '2021-02-20T09:42:04.628Z',
      updatedAt: '2021-04-16T03:26:37.562Z',
      id: '6030d96ca17f0200116f62c6',
    },
    {
      feature: 'transfer_create',
      levels: [
        {
          approvers: [
            '6017a28e4de26e0010eacada',
            '5fbb7516c2115b0011d3d552',
            '6007aeb2d6d4fc00179edd81',
            '602f1d0841a4740016add552',
            '6075508679d1dd00102f0abb',
            '60223575271eec0018d25e94',
          ],
          level: '1',
        },
        {approvers: [], level: '2'},
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: 'd3ee34b4-3df1-47cd-8703-57fa5b097175',
      updatedBy: '5998c6ad-ddf0-4c91-ab5c-f577c6e891a4',
      createdAt: '2021-02-05T06:15:57.933Z',
      updatedAt: '2021-04-16T11:16:10.762Z',
      id: '601ce29debd994001776ea6d',
    },
    {
      feature: 'adjust_create',
      levels: [
        {
          approvers: [
            '602114a19579f500174dd138',
            '602c929d4399d30010375be1',
            '60223575271eec0018d25e94',
            '6021145b9579f500174dd137',
            '6020d8212b30660018e2aed3',
            '6020d8062b30660018e2aed2',
            '5ff6e7982ad82600172304b6',
            '5fb387f13896e2001741936c',
          ],
          level: '1',
        },
        {approvers: ['6075508679d1dd00102f0abb'], level: '2'},
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: '00bb0fdc-05bf-4e16-a8e1-a40d71e96b27',
      updatedBy: '5998c6ad-ddf0-4c91-ab5c-f577c6e891a4',
      createdAt: '2021-02-01T04:13:11.036Z',
      updatedAt: '2021-04-16T02:56:58.090Z',
      id: '60177fd77bddad0010a6d599',
    },
    {
      feature: 'cardTransfer_create',
      levels: [
        {
          approvers: [
            '601cada2ebd994001776ea6a',
            '60223575271eec0018d25e94',
            '602f1d0841a4740016add552',
            '5fad133f8240360010ac5547',
            '6075508679d1dd00102f0abb',
          ],
          level: '1',
        },
        {approvers: [], level: '2'},
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: 'd3ee34b4-3df1-47cd-8703-57fa5b097175',
      updatedBy: '5998c6ad-ddf0-4c91-ab5c-f577c6e891a4',
      createdAt: '2021-01-25T08:24:23.311Z',
      updatedAt: '2021-04-16T06:55:55.893Z',
      id: '600e8037bc6a670017187c19',
    },
    {
      feature: 'bulkmerchantAdjustment_create',
      levels: [
        {
          approvers: [
            '6041df526959ef00170daf0d',
            '5fe99cf721a70400171688a4',
            '5ffc174f771d5700117434a6',
          ],
          level: '1',
        },
        {approvers: [], level: '2'},
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: 'd3ee34b4-3df1-47cd-8703-57fa5b097175',
      updatedBy: '21f22498-713a-4244-bfb7-2d8c9ac1daa9',
      createdAt: '2020-12-28T08:58:54.769Z',
      updatedAt: '2021-03-05T07:42:25.214Z',
      id: '5fe99e4e21a70400171688a7',
    },
    {
      feature: 'bulkmerchantTopUp_create',
      levels: [
        {approvers: ['5fe99cf721a70400171688a4', '6077d809cdbdcc0011b31748'], level: '1'},
        {
          approvers: [
            '6041df526959ef00170daf0d',
            '5ffc174f771d5700117434a6',
            '6077d819cdbdcc0011b31749',
          ],
          level: '2',
        },
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: 'd3ee34b4-3df1-47cd-8703-57fa5b097175',
      updatedBy: '5998c6ad-ddf0-4c91-ab5c-f577c6e891a4',
      createdAt: '2020-12-28T08:58:47.300Z',
      updatedAt: '2021-04-15T06:07:49.374Z',
      id: '5fe99e4721a70400171688a6',
    },
    {
      feature: 'merchantAdjust_create',
      levels: [
        {approvers: ['6041df526959ef00170daf0d'], level: '1'},
        {approvers: [], level: '2'},
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: 'd3ee34b4-3df1-47cd-8703-57fa5b097175',
      updatedBy: '21f22498-713a-4244-bfb7-2d8c9ac1daa9',
      createdAt: '2020-12-28T08:57:40.514Z',
      updatedAt: '2021-03-05T07:36:55.731Z',
      id: '5fe99e0421a70400171688a5',
    },
    {
      feature: 'merchantTopUp_create',
      levels: [
        {approvers: ['6041df526959ef00170daf0d', '6017a28e4de26e0010eacada'], level: '1'},
        {approvers: [], level: '2'},
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: 'd3ee34b4-3df1-47cd-8703-57fa5b097175',
      updatedBy: '099d43b9-bc9d-4868-874d-f6c0a464e209',
      createdAt: '2020-12-28T08:24:55.293Z',
      updatedAt: '2021-04-06T14:49:59.187Z',
      id: '5fe9965721a70400171688a3',
    },
    {
      feature: 'bulkTransfer_create',
      levels: [
        {
          approvers: [
            '5fa0c4f800328c00107e9013',
            '5fa0c4e300328c00107e9012',
            '5fad03d1bcedcc001025741d',
            '6017a28e4de26e0010eacada',
            '6075508679d1dd00102f0abb',
          ],
          level: '1',
        },
        {approvers: [], level: '2'},
        {approvers: [], level: '3'},
        {approvers: [], level: '4'},
        {approvers: [], level: '5'},
        {approvers: [], level: '6'},
      ],
      status: 'active',
      createdBy: '8b99bc77-b89e-4a6f-9e59-b5e47e8cc7b6',
      updatedBy: '5998c6ad-ddf0-4c91-ab5c-f577c6e891a4',
      createdAt: '2020-11-03T02:56:28.145Z',
      updatedAt: '2021-04-16T03:07:39.808Z',
      id: '5fa0c6dc00328c00107e9018',
    },
  ],
  40,
);

const workflowApiBaseUrl = `${environment.workflowsApiBaseUrl}/api/workflows`;

export const handlers = [
  rest.get(
    `${workflowApiBaseUrl}/admin/approval-requests`,
    createPaginationHandler(MOCK_APPROVAL_REQUESTS),
  ),
  rest.get(
    `${workflowApiBaseUrl}/admin/approval-requests/:id`,
    createDetailHandler(MOCK_APPROVAL_REQUESTS, 'id'),
  ),
  rest.get(
    `${workflowApiBaseUrl}/admin/approval-rules`,
    createPaginationHandler(MOCK_APPROVAL_RULES),
  ),
  rest.get(
    `${workflowApiBaseUrl}/admin/approval-rules/:id`,
    createDetailHandler(MOCK_APPROVAL_RULES, 'id'),
  ),
];
